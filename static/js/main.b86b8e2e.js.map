{"version":3,"file":"static/js/main.b86b8e2e.js","mappings":"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","sources":["modules/personaCore/memory.js","App.js","index.js","CHANGELOG.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["export const shortTermMemory = []; // { role: 'user' | 'assistant', content: string }\r\n\r\nexport const longTermMemory = []; // { type, content, importance, date, ... }\r\n\r\nexport function addToShortTerm(role, content) {\r\n  shortTermMemory.push({ role, content });\r\n\r\n  // –û–≥—Ä–∞–Ω–∏—á–∏–º –¥–æ 6 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (3 —Ä–µ–ø–ª–∏–∫–∏ –æ—Ç –∫–∞–∂–¥–æ–≥–æ)\r\n  if (shortTermMemory.length > 10) shortTermMemory.shift();\r\n  if (typeof content === \"string\") {\r\n    console.log(`üß† [–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è] ${role}: ${content}`);\r\n  } else {\r\n    console.log(`üß† [–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è] ${role}:`, content);\r\n  }\r\n}\r\n\r\nexport function clearShortTerm() {\r\n  shortTermMemory.length = 0;\r\n}\r\n\r\nexport function getShortTermContext() {\r\n  return [...shortTermMemory]; // shallow copy\r\n}\r\n\r\nexport function addToLongTerm({ content, source, tags }) {\r\n  const memoryItem = {\r\n    content,\r\n    source,\r\n    tags,\r\n    date: new Date().toISOString()\r\n  };\r\n  longTermMemory.push(memoryItem);\r\n  // console.log('üíæ [–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å] –î–æ–±–∞–≤–ª–µ–Ω–æ:', memoryItem);\r\n}\r\n\r\nexport function printShortTermMemory() {\r\n  console.log(\"üß† –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å:\");\r\n  shortTermMemory.forEach((entry, index) => {\r\n    console.log(`\\n#${index + 1} ‚Äî [${entry.role}]`);\r\n    try {\r\n      const parsed = JSON.parse(entry.content);\r\n      console.dir(parsed, { depth: null });\r\n    } catch {\r\n      console.log(entry.content);\r\n    }\r\n  });\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  Button,\r\n  StyleSheet,\r\n  ScrollView,\r\n  Modal,\r\n  Pressable,\r\n  Image,            // üëà –¥–æ–±–∞–≤–∏–ª–∏\r\n} from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { addToShortTerm } from './modules/personaCore/memory.js';\r\nimport { CHANGELOG } from \"./CHANGELOG\";\r\nimport Constants from 'expo-constants';\r\n\r\nconst PIPELINE_URL = \"https://neokid-proxy.onrender.com/neokid-pipeline\";\r\nconst DRAW_STREAM_URL = \"https://neokid-proxy.onrender.com/draw-stream\";\r\nlet drawCallCounter = 0;\r\n\r\nfunction generateUserId() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n    const r = (Math.random() * 16) | 0;\r\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nasync function sendThroughServerPipeline(userMessage, userId) {\r\n  const response = await fetch(PIPELINE_URL, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      message: userMessage,\r\n      userId: userId || \"anonymous\",\r\n    }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    console.error(\"Pipeline error:\", response.status, await response.text());\r\n    return {\r\n      content: \"–û–π, —è –Ω–µ–º–Ω–æ–∂–µ—á–∫–æ —Å–ª–æ–º–∞–ª—Å—è‚Ä¶ üò¢\",\r\n      images: [],\r\n      actionType: \"text\",\r\n      reactionHint: \"\",\r\n      ratingHint: \"\",\r\n      actionParams: {},\r\n    };\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  // üí° –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –¥–æ–±–∞–≤–∏–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç—ã,\r\n  // —á—Ç–æ–±—ã —Ñ—Ä–æ–Ω—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–ø–∞–ª.\r\n  return {\r\n    content: data.content || \"\",\r\n    images: data.images || [],\r\n    actionType: data.actionType || \"text\",\r\n    reactionHint: data.reactionHint || \"\",\r\n    ratingHint: data.ratingHint || \"\",\r\n    actionParams: data.actionParams || {},\r\n  };\r\n}\r\n\r\nexport default function App() {\r\n  const version = Constants.expoConfig.version;\r\n  const [showChangelog, setShowChangelog] = useState(false);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [conversationHistory, setConversationHistory] = useState([]);\r\n  const [currentAssistantReply, setCurrentAssistantReply] = useState('');\r\n  const [assistantImages, setAssistantImages] = useState([]);  // üëà –Ω–æ–≤—ã–π —Å—Ç–µ–π—Ç\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [userId, setUserId] = useState(null);\r\n  const [imageModalVisible, setImageModalVisible] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const storedId = await AsyncStorage.getItem('neokid_user_id');\r\n        if (storedId) {\r\n          setUserId(storedId);\r\n        } else {\r\n          const newId = generateUserId();\r\n          await AsyncStorage.setItem('neokid_user_id', newId);\r\n          setUserId(newId);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to init userId', err);\r\n        // –Ω–∞ –∫—Ä–∞–π–Ω—è–∫ –ø—É—Å—Ç—å –±—É–¥–µ—Ç –∞–Ω–æ–Ω–∏–º\r\n        if (!userId) {\r\n          const fallback = generateUserId();\r\n          setUserId(fallback);\r\n        }\r\n      }\r\n    })();\r\n  }, []);\r\n\r\nasync function startStreamingDraw(userMessage) {\r\n  drawCallCounter += 1;\r\n  console.log(\"üî• startStreamingDraw called, count =\", drawCallCounter, \"prompt =\", userMessage);\r\n  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥\r\n  // Fallback: –µ—Å–ª–∏ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ—Ç EventSource (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ web)\r\n  if (typeof EventSource === \"undefined\") {\r\n    console.warn(\"EventSource is not supported, falling back to normal pipeline\");\r\n    setLoading(true);\r\n    try {\r\n      const finalReply = await sendThroughServerPipeline(userMessage);\r\n      setCurrentAssistantReply(finalReply.content || \"\");\r\n      setAssistantImages(finalReply.images || []);\r\n      addToShortTerm(\"assistant\", finalReply.content || \"\");\r\n    } catch (err) {\r\n      console.error(\"‚ùå –û—à–∏–±–∫–∞ –≤ fallback-–ø–∞–π–ø–ª–∞–π–Ω–µ:\", err);\r\n      const fallback = \"–û–π! –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ üò¢\";\r\n      setCurrentAssistantReply(fallback);\r\n      setAssistantImages([]);\r\n      addToShortTerm(\"assistant\", fallback);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    return;\r\n  }\r\n\r\n  setLoading(true);\r\n  setAssistantImages([]);\r\n  setCurrentAssistantReply(\"\"); // —Ç–µ–∫—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ\r\n\r\n  const url =\r\n    DRAW_STREAM_URL +\r\n    `?prompt=${encodeURIComponent(userMessage)}` +\r\n    \"&style=crayons&size=1024x1024&quality=low&partial_images=3\";\r\n\r\n  const es = new EventSource(url);\r\n\r\n  es.addEventListener(\"hello\", (e) => {\r\n    console.log(\"hello from /draw-stream:\", e.data);\r\n  });\r\n\r\n  es.addEventListener(\"partial\", (e) => {\r\n    try {\r\n      const data = JSON.parse(e.data);\r\n      // –æ–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\r\n      setAssistantImages([{ url: data.url }]);\r\n    } catch (err) {\r\n      console.error(\"partial parse error:\", err);\r\n    }\r\n  });\r\n\r\n  es.addEventListener(\"final\", (e) => {\r\n    try {\r\n      const data = JSON.parse(e.data);\r\n      // —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞\r\n      setAssistantImages([{ url: data.url }]);\r\n      setCurrentAssistantReply(\"–í–æ—Ç —Ç–≤–æ–π —Ä–∏—Å—É–Ω–æ–∫!\");\r\n      addToShortTerm(\"assistant\", \"–í–æ—Ç —Ç–≤–æ–π —Ä–∏—Å—É–Ω–æ–∫!\");\r\n    } catch (err) {\r\n      console.error(\"final parse error:\", err);\r\n      const fallback = \"–í–æ—Ç —Ç–≤–æ–π —Ä–∏—Å—É–Ω–æ–∫!\";\r\n      setCurrentAssistantReply(fallback);\r\n      addToShortTerm(\"assistant\", fallback);\r\n    } finally {\r\n      setLoading(false);\r\n      es.close();\r\n    }\r\n  });\r\n\r\n  es.addEventListener(\"error\", (e) => {\r\n    console.error(\"stream error\", e);\r\n    setLoading(false);\r\n    const fallback = \"–û–π! –ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å üò¢\";\r\n    setCurrentAssistantReply(fallback);\r\n    setAssistantImages([]);\r\n    addToShortTerm(\"assistant\", fallback);\r\n    es.close();\r\n  });\r\n}\r\n\r\n  const sendMessage = async () => {\r\n  let drawingPlanned = false;\r\n  if (!input.trim()) return;\r\n\r\n  // –µ—Å–ª–∏ –±—ã–ª –ø—Ä–æ—à–ª—ã–π –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏–º –µ–≥–æ –≤ –∏—Å—Ç–æ—Ä–∏—é\r\n  if (currentAssistantReply || (assistantImages && assistantImages.length)) {\r\n    setConversationHistory(prev => {\r\n      const updated = [\r\n        {\r\n          role: 'assistant',\r\n          content: currentAssistantReply,\r\n          images: assistantImages ? [...assistantImages] : [], // üëà –∫–ª–∞–¥—ë–º –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é\r\n        },\r\n        ...prev,\r\n      ];\r\n      return updated.slice(0, 10);\r\n    });\r\n  }\r\n\r\n  const userMessage = input.trim();\r\n\r\n  setCurrentAssistantReply('');\r\n  setAssistantImages([]);\r\n  const lower = userMessage.toLowerCase();\r\n  const willDraw =\r\n    lower.includes('–Ω–∞—Ä–∏—Å') ||\r\n    lower.includes('draw') ||\r\n    lower.includes('‡∏ß‡∏≤‡∏î') ||\r\n    lower.includes('Áîª');\r\n  setIsDrawing(willDraw);\r\n\r\n  // –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é –ø–∞–º—è—Ç—å –∏ –∏—Å—Ç–æ—Ä–∏—é\r\n  addToShortTerm('user', userMessage);\r\n  setConversationHistory(prev => {\r\n    const updated = [\r\n      { role: 'user', content: userMessage },\r\n      ...prev,\r\n    ];\r\n    return updated.slice(0, 10);\r\n  });\r\n\r\n  // –æ—á–∏—â–∞–µ–º –∏–Ω–ø—É—Ç\r\n  setInput('');\r\n  setLoading(true);\r\n  \r\n  try {\r\n    // üî• –∑–∞–ø—É—Å–∫–∞–µ–º –ü–û–õ–ù–´–ô –ø–∞–π–ø–ª–∞–π–Ω:\r\n    // semantic ‚Üí intent ‚Üí ageFilter ‚Üí responsePlanner ‚Üí generateOutput\r\n    const finalReply = await sendThroughServerPipeline(\r\n  userMessage,\r\n  userId || \"anonymous\"\r\n  );\r\n  \r\n  const {\r\n    content,\r\n    images,\r\n    actionType,\r\n    reactionHint,\r\n    ratingHint,\r\n    actionParams,\r\n  } = finalReply;\r\n\r\nsetCurrentAssistantReply(content || '');\r\n\r\n  // –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥\r\n  const ratingText = (ratingHint || \"\").toLowerCase();\r\n  const looksUnsafe =\r\n    ratingText.includes(\"–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º\") ||\r\n    ratingText.includes(\"–≤–∑—Ä–æ—Å–ª\");\r\n\r\n  const isDrawAction =\r\n    reactionHint === \"draw\" || actionType === \"draw_and_text\";\r\n\r\n  if (isDrawAction && !looksUnsafe) {\r\n    drawingPlanned = true;  // üëà –≥–æ–≤–æ—Ä–∏–º: –¥–∞–ª—å—à–µ —Ä–∏—Å—É–µ–º —Å—Ç—Ä–∏–º–æ–º\r\n    // –±–µ—Ä—ë–º –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –∏–∑ actionParams,\r\n    // –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç ‚Äî fallback –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\r\n    const drawPrompt = actionParams?.drawPrompt || userMessage;\r\n    await startStreamingDraw(drawPrompt);\r\n  } else {\r\n    // –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç –±–µ–∑ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞\r\n    setAssistantImages(images || []);\r\n    // –∏ –º–æ–∂–Ω–æ —Ç—É—Ç –∂–µ —Å–±—Ä–æ—Å–∏—Ç—å \"–ú–∏—à–∫–∞ —Ä–∏—Å—É–µ—Ç\", –µ—Å–ª–∏ willDraw –±—ã–ª, –∞ planner –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª\r\n    if (!isDrawAction) {\r\n      setIsDrawing(false);\r\n    }\r\n  }\r\n\r\n    // –ø–∏—à–µ–º –æ—Ç–≤–µ—Ç –≤ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é –ø–∞–º—è—Ç—å\r\n    addToShortTerm('assistant', finalReply.content || '');\r\n  } catch (err) {\r\n    console.error(\"‚ùå –û—à–∏–±–∫–∞ –≤ sendMessage:\", err);\r\n    const fallback = '–û–π! –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ üò¢';\r\n\r\n    setCurrentAssistantReply(fallback);\r\n    setAssistantImages([]);              // üëà –æ—á–∏—â–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ\r\n    addToShortTerm('assistant', fallback);\r\n  } finally {\r\n  // üîë –ì–∞—Å–∏–º loading –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –Ω–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥\r\n  if (!drawingPlanned) {\r\n    setLoading(false);\r\n  }\r\n  // –¥–ª—è —Å—Ç—Ä–∏–º–∞ setLoading(false) —É–∂–µ –¥–µ–ª–∞–µ—Ç startStreamingDraw –≤ final/error\r\n}\r\n};\r\n\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>–ü–æ–≥–æ–≤–æ—Ä–∏ —Å –ú–∏—à–∫–æ–π</Text>\r\n\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"–ù–∞–ø–∏—à–∏ –ú–∏—à–∫–µ...\"\r\n        value={input}\r\n        onChangeText={setInput}\r\n        editable={!loading}\r\n        onSubmitEditing={sendMessage} // ‚Üê —ç—Ç–æ –∏ –µ—Å—Ç—å \"Enter\"\r\n        returnKeyType=\"send\" // –≤–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã\r\n      />\r\n\r\n      <Button title=\"–û—Ç–ø—Ä–∞–≤–∏—Ç—å\" onPress={sendMessage} disabled={loading} />\r\n\r\n      <View style={styles.replyContainer}>\r\n      <ScrollView style={styles.replyBox}>\r\n      <Text style={styles.systemLine}>\r\n      {loading ? (\r\n      isDrawing\r\n        ? 'üñçÔ∏è –ú–∏—à–∫–∞ —Ä–∏—Å—É–µ—Ç...'\r\n        : 'üí≠ –ú–∏—à–∫–∞ –¥—É–º–∞–µ—Ç...'\r\n    ) : currentAssistantReply ? (\r\n      `üë∂ ${currentAssistantReply}`\r\n    ) : (\r\n      ''\r\n    )}\r\n      </Text>\r\n      {/* üëá –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî –≤—ã–≤–æ–¥ –∫–∞—Ä—Ç–∏–Ω–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞ */}\r\n      {assistantImages?.map((img, index) => (\r\n       <Pressable\r\n       key={index}\r\n       onPress={() => {\r\n       setSelectedImage(img.url);\r\n       setImageModalVisible(true);\r\n      }}\r\n      >\r\n        <Image\r\n          source={{ uri: img.url }}\r\n          style={styles.replyImage}\r\n          resizeMode=\"contain\"\r\n        />\r\n      </Pressable>\r\n    ))}\r\n\r\n    {conversationHistory.map((msg, index) => (\r\n      <View key={index} style={{ marginBottom: 6 }}>\r\n      <Text style={styles.messageLine}>\r\n      {msg.role === 'user' ? 'üë§' : 'üë∂'} {msg.content}\r\n    </Text>\r\n\r\n    {msg.images?.map((img, i) => (\r\n    <Pressable\r\n      key={i}\r\n      onPress={() => {\r\n        setSelectedImage(img.url);\r\n        setImageModalVisible(true);\r\n      }}\r\n    >\r\n      <Image\r\n        source={{ uri: img.url }}\r\n        style={styles.replyImage}\r\n        resizeMode=\"contain\"\r\n      />\r\n    </Pressable>\r\n  ))}\r\n    </View>\r\n  ))}\r\n\r\n      </ScrollView>\r\n      <Pressable onPress={() => setShowChangelog(true)}>\r\n      <Text style={styles.versionTag}>v{version}</Text>\r\n      </Pressable>\r\n      </View>\r\n<Modal\r\n  visible={showChangelog}\r\n  animationType=\"slide\"\r\n  transparent={true}\r\n  onRequestClose={() => setShowChangelog(false)}\r\n>\r\n  <View style={styles.modalOverlay}>\r\n    <View style={styles.modalBox}>\r\n      <Text style={styles.modalTitle}>üß† –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π</Text>\r\n      <ScrollView>\r\n        <Text style={styles.modalText}>{CHANGELOG}</Text>\r\n      </ScrollView>\r\n      <Pressable onPress={() => setShowChangelog(false)}>\r\n        <Text style={styles.modalClose}>–ó–∞–∫—Ä—ã—Ç—å</Text>\r\n      </Pressable>\r\n    </View>\r\n  </View>\r\n</Modal>\r\n{/* –ú–æ–¥–∞–ª–∫–∞ –¥–ª—è changelog —É–∂–µ –µ—Å—Ç—å –≤—ã—à–µ */}\r\n<Modal\r\n  visible={imageModalVisible}\r\n  transparent\r\n  animationType=\"fade\"\r\n  onRequestClose={() => setImageModalVisible(false)}\r\n>\r\n  <Pressable\r\n    style={styles.fullImageOverlay}\r\n    onPress={() => setImageModalVisible(false)}\r\n  >\r\n    <View style={styles.fullImageBox}>\r\n      {selectedImage && (\r\n        <Image\r\n          source={{ uri: selectedImage }}\r\n          style={styles.fullImage}\r\n          resizeMode=\"contain\"\r\n        />\r\n      )}\r\n    </View>\r\n  </Pressable>\r\n</Modal>\r\n </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n  flex: 1,\r\n  paddingHorizontal: 20,\r\n  paddingTop: 50,\r\n  paddingBottom: 16,\r\n  backgroundColor: '#fff',\r\n},\r\n  title: { fontSize: 24, marginBottom: 10, textAlign: 'center' },\r\n  input: {\r\n    borderWidth: 1, borderColor: '#ccc', padding: 10,\r\n    marginBottom: 10, borderRadius: 5, fontSize: 16,\r\n  },\r\n  replyContainer: {\r\n  position: 'relative',\r\n  marginTop: 20,\r\n  flex: 1,              // üëà –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è\r\n  },\r\n  replyBox: {\r\n  // marginTop: 20,\r\n  backgroundColor: '#e0f2ff', // –≥–æ–ª—É–±–æ–π\r\n  padding: 10,\r\n  borderRadius: 8,\r\n  flex: 1,              // üëà –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã\r\n},\r\n  replyImage: {\r\n  marginTop: 10,\r\n  marginBottom: 10,\r\n  width: 220,\r\n  height: 220,\r\n  borderRadius: 8,\r\n  alignSelf: 'flex-start', // üëà –ª–µ–≤—ã–π –∫—Ä–∞–π\r\n},\r\n  systemLine: {\r\n  fontSize: 18,\r\n  fontWeight: 'bold',\r\n  marginBottom: 8,\r\n},\r\n  messageLine: {\r\n  fontSize: 16,\r\n  marginBottom: 4,\r\n},\r\n  versionTag: {\r\n  position: 'absolute',\r\n  bottom: 4,\r\n  right: 16,\r\n  fontSize: 13,\r\n  color: '#888',\r\n  },\r\n  modalOverlay: {\r\n  flex: 1,\r\n  backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n},\r\nmodalBox: {\r\n  width: '80%',\r\n  backgroundColor: '#fff',\r\n  borderRadius: 10,\r\n  padding: 20,\r\n  maxHeight: '70%',\r\n},\r\nmodalTitle: {\r\n  fontSize: 18,\r\n  fontWeight: 'bold',\r\n  marginBottom: 10,\r\n},\r\nmodalText: {\r\n  fontSize: 16,\r\n  lineHeight: 20,\r\n},\r\nmodalClose: {\r\n  textAlign: 'center',\r\n  marginTop: 20,\r\n  fontWeight: 'bold',\r\n  color: '#007aff',\r\n},\r\nfullImageOverlay: {\r\n  flex: 1,\r\n  backgroundColor: 'rgba(0,0,0,0.85)',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n},\r\nfullImageBox: {\r\n  width: '92%',\r\n  height: '85%',\r\n},\r\nfullImage: {\r\n  width: '100%',\r\n  height: '100%',\r\n  borderRadius: 12,\r\n},\r\n});\r\n","import { registerRootComponent } from 'expo';\nimport App from './App';\n\nregisterRootComponent(App);\n","// CHANGELOG.js\r\n// Export changelog text to reuse in App.js\r\n\r\nexport const CHANGELOG = `\r\n0.3.5b\r\n- –î–æ–±–∞–≤–ª–µ–Ω –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.\r\n- –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –ø–∞–π–ø–ª–∞–π–Ω.\r\n\r\n0.3.4b\r\n- Image streaming added.\r\n\r\n0.3.3b\r\n- UI tweaks.\r\n- Full-screen image view added.\r\n\r\n0.3.2b\r\n- –ù–∞—á–∞—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è.\r\n\r\n0.3.0\r\n- –î–æ–±–∞–≤–ª–µ–Ω Long-Term Memory Engine (Supabase).\r\n- –ü–∞–π–ø–ª–∞–π–Ω —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å.\r\n- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Autosave Short-Term Memory (–∂—É—Ä–Ω–∞–ª –¥–∏–∞–ª–æ–≥–∞).\r\n- –û–±–Ω–æ–≤–ª—ë–Ω Response Planner.\r\n\r\n0.2.7\r\n- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.\r\n- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (Short-Term Memory v1).\r\n- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω.\r\n- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.\r\n\r\n0.2.5\r\n- –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω NeoKid –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω —Å —Ñ—Ä–æ–Ω—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.\r\n- Persona Core –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º—Ç.\r\n- –§–∞–π–ª /neokid-pipeline —Å—Ç–∞–ª –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞.\r\n- –§—Ä–æ–Ω—Ç–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω.\r\n\r\n0.2.0\r\n- –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª—è 1 ‚Äî Persona Core (v2) - –ø–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.\r\n- –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –±–ª–æ–∫–∞:\r\n  Identity (–∏–º—è, –ø–æ–ª, –≤–æ–∑—Ä–∞—Å—Ç, –≤–µ—Ä—Å–∏—è, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è)\r\n  Profile (temperament, traits, behaviorFlags, emotionalBaseline, speechStyle).\r\n- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Persona Core –≤ Response Planner.\r\n- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω system prompt –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç.\r\n\r\n0.1.0\r\n- –î–æ–±–∞–≤–ª–µ–Ω Intent Interpreter\r\n- –£–ª—É—á—à–µ–Ω Intent Detector\r\n- –û–±–Ω–æ–≤–ª—ë–Ω Response Planner\r\n- –§–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –º–æ–¥—É–ª—å 11 (Semantic & Intent Engine v1)\r\n- –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏–∫–æ–Ω–∫–∞ (favicon)\r\n\r\n0.1.0b\r\n- –£–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞\r\n- –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω Semantic Analyzer\r\n- –£–ª—É—á—à–µ–Ω –¥–µ—Ç–µ–∫—Ç–æ—Ä –Ω–∞–º–µ—Ä–µ–Ω–∏—è\r\n- –î–æ–±–∞–≤–ª–µ–Ω Semantic Interpreter Layer\r\n- –û–±–Ω–æ–≤–ª—ë–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º—Ç\r\n- –ù–æ–≤—ã–π Response Planner\r\n\r\n0.0.9b\r\n- –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å Semantic & Intent Engine (–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ gpt).\r\n- Semantic –∏ Intent —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ system prompt –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫.\r\n- –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (response-planner) –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.\r\n- –£–ª—É—á—à–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞–π–ø–ª–∞–π–Ω–∞.\r\n\r\n0.0.8b\r\n- –£—Ç–æ—á–Ω—ë–Ω system prompt –¥–ª—è NeoKid.\r\n- –ò–∑–º–µ–Ω—ë–Ω —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç NeoKid –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω—á–∏–≤—ã–π.\r\n- –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä—Ç—ã: –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π, —Ñ–∞–Ω—Ç–∞–∑—ë—Ä.\r\n- –£–±—Ä–∞–Ω–∞ —Ñ–∏–∫—Å–∞—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (\"–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∏–≥—Ä—É\").\r\n- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–Ω–¥–æ–º–Ω—ã–π –≤—ã–±–æ—Ä –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏, –µ—Å–ª–∏ intent –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω.\r\n\r\n0.0.7b\r\n- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥—É–ª–∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è.\r\n- NeoKid —Ç–µ–ø–µ—Ä—å —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–µ–º—ã, —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ä–µ–∞–∫—Ü–∏–∏ —Å —É—á—ë—Ç–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞.\r\n- –û–±–Ω–æ–≤–ª—ë–Ω UI, –ø–æ–¥–∫–ª—é—á—ë–Ω –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –∫ OpenAI.\r\n\r\n0.0.1\r\n- –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å: –∏–º—è, –ø–æ–ª, –≤–æ–∑—Ä–∞—Å—Ç\r\n- –¢–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç –∏ —á–µ—Ä—Ç—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞\r\n- –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (5 –ø–∞—Ä)\r\n- –°–∏—Å—Ç–µ–º–Ω—ã–π prompt\r\n- UI –∏ –≤—ã–≤–æ–¥ –≤–µ—Ä—Å–∏–∏\r\n`;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [531], () => (__webpack_require__(5440)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["shortTermMemory","addToShortTerm","role","content","push","length","shift","console","log","drawCallCounter","generateUserId","replace","c","r","Math","random","toString","async","sendThroughServerPipeline","userMessage","userId","response","fetch","method","headers","body","JSON","stringify","message","ok","error","status","text","images","actionType","reactionHint","ratingHint","actionParams","data","json","styles","StyleSheet","create","container","flex","paddingHorizontal","paddingTop","paddingBottom","backgroundColor","title","fontSize","marginBottom","textAlign","input","borderWidth","borderColor","padding","borderRadius","replyContainer","position","marginTop","replyBox","replyImage","width","height","alignSelf","systemLine","fontWeight","messageLine","versionTag","bottom","right","color","modalOverlay","justifyContent","alignItems","modalBox","maxHeight","modalTitle","modalText","lineHeight","modalClose","fullImageOverlay","fullImageBox","fullImage","registerRootComponent","version","Constants","expoConfig","showChangelog","setShowChangelog","useState","setInput","loading","setLoading","conversationHistory","setConversationHistory","currentAssistantReply","setCurrentAssistantReply","assistantImages","setAssistantImages","isDrawing","setIsDrawing","setUserId","imageModalVisible","setImageModalVisible","selectedImage","setSelectedImage","useEffect","storedId","AsyncStorage","getItem","newId","setItem","err","fallback","sendMessage","drawingPlanned","trim","prev","slice","lower","toLowerCase","willDraw","includes","finalReply","ratingText","looksUnsafe","isDrawAction","drawPrompt","EventSource","warn","url","encodeURIComponent","es","addEventListener","e","parse","close","startStreamingDraw","_jsxs","View","style","children","_jsx","Text","TextInput","placeholder","value","onChangeText","editable","onSubmitEditing","returnKeyType","Button","onPress","disabled","ScrollView","map","img","index","Pressable","Image","source","uri","resizeMode","msg","i","Modal","visible","animationType","transparent","onRequestClose","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}